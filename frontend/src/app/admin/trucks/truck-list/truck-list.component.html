<div class="p-6">
  <!-- Breadcrumb -->
  <app-breadcrumb [items]="[{ label: 'Trucks', icon: 'local_shipping' }]"></app-breadcrumb>

  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
    <div>
      <h1 class="text-2xl font-semibold text-gray-800">Truck Management</h1>
      <p class="text-gray-500 mt-1">Manage fleet vehicles and their status</p>
    </div>
    <button
      type="button"
      class="inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors"
      (click)="createTruck()">
      <span class="material-icons text-lg">add</span>
      Add Truck
    </button>
  </div>

  <!-- Filters -->
  <div class="bg-white rounded-lg shadow-card p-4 mb-6">
    <div class="flex flex-wrap items-end gap-4">
      <!-- Search Field -->
      <div class="flex-1 min-w-[250px]">
        <label class="block text-sm font-medium text-gray-700 mb-1">Search</label>
        <div class="relative">
          <input
            type="text"
            class="w-full px-3 py-2 pl-10 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
            placeholder="Search by truck ID, license plate, driver..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()">
          <span class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xl">search</span>
        </div>
      </div>

      <!-- Status Filter -->
      <div class="w-48">
        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
        <select
          class="w-full px-3 py-2 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
          [(ngModel)]="selectedStatus"
          (ngModelChange)="onFilterChange()">
          <option [ngValue]="null">All Statuses</option>
          @for (status of statuses; track status) {
            <option [ngValue]="status.value">{{ status.label }}</option>
          }
        </select>
      </div>

      @if (hasFilters()) {
        <button
          type="button"
          class="inline-flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"
          (click)="clearFilters()">
          <span class="material-icons text-lg">clear</span>
          Clear
        </button>
      }
    </div>
  </div>

  <!-- Trucks Table -->
  <div class="bg-white rounded-lg shadow-card">
    <app-data-table
      [columns]="columns"
      [data]="trucks()"
      [totalElements]="totalElements()"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      [isLoading]="loading()"
      [searchable]="false"
      [showActions]="false"
      [rowClickable]="true"
      (pageChange)="onPageChange($event)"
      (rowClicked)="onRowClick($event)">
    </app-data-table>
  </div>
</div>
