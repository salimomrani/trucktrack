// Search Bar Component Styles - Modern UI Redesign
// Feature 017: Professional Blue Theme with Flat Design
// T021: Update search-bar styles

@use '../../../../styles/theme' as theme;

.search-bar {
  display: flex;
  align-items: center;
  margin: 0 theme.$space-4;

  .search-field {
    width: 300px;
    font-size: theme.$font-size-base;

    ::ng-deep {
      .mat-mdc-form-field-flex {
        background-color: rgba(255, 255, 255, 0.15);
        border-radius: theme.$radius-md;
        padding: 0 theme.$space-2;
        border: 1px solid rgba(255, 255, 255, 0.25);
        transition: all theme.$transition-base;
      }

      .mat-mdc-form-field-infix {
        padding: theme.$space-2 0;
        min-height: 40px;
      }

      .mat-mdc-text-field-wrapper {
        padding: 0;
      }

      .mat-mdc-form-field-subscript-wrapper {
        display: none;
      }

      input {
        color: white !important;
        cursor: text;
        font-weight: theme.$font-weight-normal;
        font-size: theme.$font-size-base;
        caret-color: white;

        &::placeholder {
          color: rgba(255, 255, 255, 0.7) !important;
          font-size: theme.$font-size-base;
          font-weight: theme.$font-weight-normal;
        }

        &:focus {
          outline: none;
        }
      }

      .mat-icon {
        color: rgba(255, 255, 255, 0.7) !important;
      }

      // Hover state
      .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-flex {
        background-color: rgba(255, 255, 255, 0.25);
        border-color: rgba(255, 255, 255, 0.4);
      }

      // Focus state
      .mat-mdc-form-field.mat-focused .mat-mdc-form-field-flex {
        background-color: white;
        border-color: white;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
      }

      .mat-mdc-form-field.mat-focused input {
        color: theme.$color-gray-800 !important;

        &::placeholder {
          color: theme.$color-gray-400 !important;
        }
      }

      .mat-mdc-form-field.mat-focused .mat-icon {
        color: theme.$color-primary-600 !important;
      }

      .mat-mdc-form-field-focus-overlay {
        background-color: transparent;
      }

      // Remove the default Material outline
      .mdc-notched-outline {
        display: none;
      }
    }
  }
}

// Autocomplete panel styling
::ng-deep {
  .mat-mdc-autocomplete-panel {
    border-radius: theme.$radius-lg;
    box-shadow: theme.$shadow-lg;
    border: 1px solid theme.$color-gray-100;
    margin-top: theme.$space-1;

    .truck-option {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: theme.$space-2 0;

      .truck-info {
        display: flex;
        flex-direction: column;
        gap: theme.$space-1;

        .truck-id {
          font-weight: theme.$font-weight-medium;
          font-size: theme.$font-size-base;
          color: theme.$color-gray-800;
        }

        .driver-name {
          font-size: theme.$font-size-sm;
          color: theme.$color-gray-500;
        }
      }

      .truck-status {
        font-size: theme.$font-size-xs;
        font-weight: theme.$font-weight-medium;
        padding: theme.$space-1 theme.$space-2;
        border-radius: theme.$radius-sm;
        background-color: theme.$color-gray-100;
        color: theme.$color-gray-600;

        &.active {
          background-color: theme.$color-success-50;
          color: theme.$color-success-600;
        }
      }
    }

    mat-option {
      display: flex;
      align-items: center;
      gap: theme.$space-2;
      padding: theme.$space-3 theme.$space-4;
      min-height: 48px;
      transition: background-color 100ms ease-out;

      mat-icon {
        color: theme.$color-gray-400;
      }

      &:hover:not([disabled]) {
        background-color: theme.$color-gray-50;
      }

      &.mat-mdc-option-active {
        background-color: theme.$color-primary-50;
      }

      &[disabled] {
        color: theme.$color-gray-400;
      }
    }
  }
}

// Responsive adjustments
@media (max-width: 768px) {
  .search-bar {
    .search-field {
      width: 200px;
    }
  }
}

@media (max-width: 480px) {
  .search-bar {
    margin: 0 theme.$space-2;

    .search-field {
      width: 150px;
    }
  }
}
