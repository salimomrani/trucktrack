<div class="flex flex-wrap items-start gap-4">
  <!-- Period Select -->
  <div class="flex flex-col gap-1">
    <label class="text-xs font-medium text-gray-600">Période</label>
    <select
      class="px-3 py-2 bg-white border border-gray-300 rounded-md text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 min-w-[160px]"
      [value]="selectedPeriod()"
      (change)="onPeriodChange($event)">
      @for (option of periodOptions; track option.value) {
        <option [value]="option.value">{{ option.label }}</option>
      }
    </select>
  </div>

  @if (selectedPeriod() === 'CUSTOM') {
    <!-- Date Range -->
    <div class="flex flex-wrap items-start gap-3">
      <!-- Start Date -->
      <div class="flex flex-col gap-1">
        <label class="text-xs font-medium text-gray-600">Date début</label>
        <input
          type="date"
          class="px-3 py-2 bg-white border border-gray-300 rounded-md text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
          [value]="localStartDate"
          [max]="localEndDate || maxDate"
          (change)="onStartDateChange($event)">
      </div>

      <!-- End Date -->
      <div class="flex flex-col gap-1">
        <label class="text-xs font-medium text-gray-600">Date fin</label>
        <input
          type="date"
          class="px-3 py-2 bg-white border border-gray-300 rounded-md text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
          [value]="localEndDate"
          [min]="localStartDate"
          [max]="maxDate"
          (change)="onEndDateChange($event)">
      </div>
    </div>

    @if (dateError()) {
      <div class="flex items-center gap-2 text-danger-600 text-sm">
        <span class="material-icons text-lg">error</span>
        {{ dateError() }}
      </div>
    }

    @if (localStartDate && localEndDate && !dateError()) {
      <div class="flex items-center gap-2 text-gray-600 text-sm bg-gray-50 px-3 py-2 rounded-md">
        <span class="material-icons text-lg">date_range</span>
        <span>{{ formatDateDisplay(localStartDate) }} - {{ formatDateDisplay(localEndDate) }} ({{ getDayCount() }} jours)</span>
      </div>
    }
  }
</div>
