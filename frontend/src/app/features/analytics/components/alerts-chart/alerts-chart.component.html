<mat-card class="chart-card"
          role="figure"
          [attr.aria-label]="'Graphique de répartition des alertes: ' + getChartSummary()"
          [attr.aria-busy]="isLoading">
  <mat-card-header>
    <mat-card-title>Répartition des alertes</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    @if (isLoading) {
      <div class="loading-state" aria-hidden="true">
        <mat-spinner diameter="40"></mat-spinner>
      </div>
    } @else if (chartData().length === 0) {
      <div class="empty-state">
        <p>Aucune alerte pour cette période</p>
      </div>
    } @else {
      <ngx-charts-pie-chart
        [view]="[chartWidth, 300]"
        [scheme]="colorScheme"
        [results]="chartData()"
        [legend]="false"
        [labels]="true"
        [doughnut]="true"
        [arcWidth]="0.4"
        [tooltipDisabled]="false">
      </ngx-charts-pie-chart>
    }
  </mat-card-content>
</mat-card>
