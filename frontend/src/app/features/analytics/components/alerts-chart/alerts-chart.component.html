<div
  class="bg-white dark:bg-gray-800 rounded-lg shadow-card overflow-hidden"
  role="figure"
  [attr.aria-label]="'Graphique de répartition des alertes: ' + getChartSummary()"
  [attr.aria-busy]="isLoading()">

  <div class="px-4 py-3 border-b border-gray-100 dark:border-gray-700">
    <h3 class="text-base font-semibold text-gray-800 dark:text-gray-100">Répartition des alertes</h3>
  </div>

  <div class="p-4">
    @if (isLoading()) {
      <div class="flex items-center justify-center h-[300px]" aria-hidden="true">
        <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary-500 border-t-transparent"></div>
      </div>
    } @else if (chartData().length === 0) {
      <div class="flex items-center justify-center h-[300px] text-gray-500 dark:text-gray-400">
        <p>Aucune alerte pour cette période</p>
      </div>
    } @else {
      <ngx-charts-pie-chart
        [view]="[chartWidth(), 300]"
        [scheme]="colorScheme"
        [results]="chartData()"
        [legend]="false"
        [labels]="true"
        [doughnut]="true"
        [arcWidth]="0.4"
        [tooltipDisabled]="false">
      </ngx-charts-pie-chart>
    }
  </div>
</div>
